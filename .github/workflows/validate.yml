name: "VALIDATE"
run-name: ðŸ¤– Validating code on ${{ github.ref_name }}

on:
  push:
  pull_request:

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
      - name : Debug
        env : { GITHUB : "${{ toJson(github) }}" }
        run: echo "$GITHUB" | jq

  validate:
    name: Validate
    if: |
      (github.event_name == 'push') ||
      (github.event_name == 'pull_request' && github.event.pull_request.head.repo.fork)
    runs-on: ubuntu-latest
    steps:
      - name: ðŸš¦ Test
        run: echo "Running tests" && true

  publish:
    name: Publish
    needs: validate
    if: |
      (github.event_name == 'push' && github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    steps:
      - name: Publish
        run: echo "Publish code" && true
