name: VALIDATE

on:
  push:
    branches:
      - "**"
      - "!master"
  pull_request:
  workflow_call:

jobs:
  validate:
    name: Validate
    if: |
      (github.event_name == 'push') ||
      (github.event_name == 'pull_request' && github.event.pull_request.head.repo.fork)
    runs-on: ubuntu-latest
    steps:
      - name: ðŸš¦ Test
        run: echo "Running tests" && true

  publish:
    name: Publish
    needs: validate
    if: |
      (github.event_name == 'push' && github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    steps:
      - name: Publish
        run: echo "Publish code" && true
